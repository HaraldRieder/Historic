<html>
<head>
<title>
Theory
</title>
<meta name="Author" content="Harald Rieder">
</head>
<body>
<i>Mad Harry's MIDI Enhancer</i><br><br>
<a href="02.HTM"><img src="udo_up.gif" alt="Using the MIDI Enhancer"></a>
<a href="02.HTM"><img src="udo_lf.gif" alt="Using the MIDI Enhancer"></a>
<a href="0202.HTM"><img src="udo_rg.gif" alt="General"></a>
<hr>
<h1><a name="Theory">2.1 Theory</a></h1>
<p>Let me first redefine the terms &quot;note&quot;,
&quot;interval&quot; and &quot;distance&quot; as used in this
document.
</p>
<p>A &quot;note&quot; is identified by its MIDI note number. So the
lowest C is note 0, the lowest C# is note 1, and so on. The next
higher C is note 12 then - in the decimal system. To indicate the
relationship between different C's, we use the dodecimal system here,
leading to note numbers 0, 10, 20, 30, ... for the different C's. The
least significant digit of a C thus will always be 0. So we can
shortly speak of &quot;0&quot; and mean all C's together.
</p>
<blockquote>
<p>
<table border=1 frame=box>
<p align=center>
<tr><td align=left><b>Classical&nbsp;</b></td><td align=left><b>This document&nbsp;</b></td></tr>
<tr><td align=left>C</td><td align=left>0</td></tr>
<tr><td align=left>C#</td><td align=left>1</td></tr>
<tr><td align=left>D</td><td align=left>2</td></tr>
<tr><td align=left>D#</td><td align=left>3</td></tr>
<tr><td align=left>E</td><td align=left>4</td></tr>
<tr><td align=left>F</td><td align=left>5</td></tr>
<tr><td align=left>F#</td><td align=left>6</td></tr>
<tr><td align=left>G</td><td align=left>7</td></tr>
<tr><td align=left>G#</td><td align=left>8</td></tr>
<tr><td align=left>A</td><td align=left>9</td></tr>
<tr><td align=left>A#</td><td align=left>A</td></tr>
<tr><td align=left>H</td><td align=left>B</td></tr>
</table>
</p>

<p>Least significant digit of note number (dodecimal system)
</p>
</blockquote>
<p>&quot;Interval&quot; is simply the difference between MIDI note
numbers. For example, the lowest MIDI note number is 0 and corresponds
to a very low C. The note with number 5 is an F. The interval between
the F and the C then is 5&nbsp;-&nbsp;0&nbsp;=&nbsp;5.
</p>
<p>A &quot;distance&quot; finally shall mean the real frequency
distance of 2 sounding notes. To be more exact, the distance between 2
notes is the logarithm of the ratio of their sounds' basic
frequencies: log(f2/f1).
</p>
<p>&quot;Tuning&quot; means, that the distance of an interval gets
modified. The interval itself is not changed, since it is only the
difference between the numbers of its notes.
</p>
<p>Intervals are tuned &quot;clean&quot; if their distances
correspond to simple frequency ratios: the simpler the ratio the
cleaner the interval. For example the octave - which is the interval
&quot;10&quot; in our dodecimal system - normally consists of 2 tones
tuned in the ratio 2/1. Other good sounding ratios are 3/2, 4/3, 5/4,
6/5, 7/4, 7/5, ... .
</p>
<p>All tunings discussed in the following will not change the clean
tuning 2/1 of the interval 10. The current version of the MIDI
Enhancer also does not allow to change the tuning of this interval.
</p>
<p>The most convenient today's &quot;well tempered&quot; tuning uses
the ratios
</p>
<blockquote>
<p>2^(1/12), 2^(2/12), 2^(3/12), ...
</p>
</blockquote>
<p>2^(3/12) you find from C to D#, or from D to F, for example.
Actually, besides the 10s with their ratios of 2^(12/12) = 2/1, there
are no other rational frequency ratios, but only irrational numbers.
The easy formula
</p>
<blockquote>
<p>f / f0 = 2 ^ ( n / 12 )
</p>
</blockquote>
<p>expresses the relation between MIDI note number &quot;n&quot; and
sounding frequency &quot;f&quot;. &quot;f0&quot; is the frequency of
the lowest MIDI note 0.
</p>
<p>Pythagoras is supposed to have invented the
&quot;pythagoraen&quot; tuning. Beginning from any special note other
notes are found by repeated application of clean 7s (quints):
</p>
<blockquote>
<p>1 &gt; 8 &gt; 3 &gt; A &gt; 5 &gt; 0 &gt; 7 &gt; 2 &gt; 9 &gt; 4
&gt; B &gt; 6
</p>
<p>&quot;&gt;&quot; means, that right and left notes have a ratio of
3/2.
</p>
</blockquote>
<p>Thus you are lead to tunings like the following (see
&quot;tables\pythagor.txt&quot;), which is repeated every dodecime (in
the MIDI Enhancer &quot;f&quot; means the frequency of the
&quot;harmonizing note&quot;):
</p>
<blockquote>
<p>
<table border=1 frame=box>
<p align=center>
<tr><td align=left><b>Distance</b></td><td align=left><b>Tuning</b></td><td align=left></td></tr>
<tr><td align=left>0</td><td align=left>1/1</td><td align=left>* f</td></tr>
<tr><td align=left>1</td><td align=left>256/243</td><td align=left>* f</td></tr>
<tr><td align=left>2</td><td align=left>9/8</td><td align=left>* f</td></tr>
<tr><td align=left>3</td><td align=left>32/27</td><td align=left>* f</td></tr>
<tr><td align=left>4</td><td align=left>81/64</td><td align=left>* f</td></tr>
<tr><td align=left>5</td><td align=left>4/3</td><td align=left>* f</td></tr>
<tr><td align=left>6</td><td align=left>729/512</td><td align=left>* f</td></tr>
<tr><td align=left>7</td><td align=left>3/2</td><td align=left>* f</td></tr>
<tr><td align=left>8</td><td align=left>128/81</td><td align=left>* f</td></tr>
<tr><td align=left>9</td><td align=left>27/16</td><td align=left>* f</td></tr>
<tr><td align=left>A</td><td align=left>16/9</td><td align=left>* f</td></tr>
<tr><td align=left>B</td><td align=left>243/128</td><td align=left>* f</td></tr>
</table>
</p>

</blockquote>
<p>This pythagoraen tuning has a &quot;woolf's 7&quot; between 6 and
1, i.e. the &quot;quint circle&quot; does never close (like it does
after 12 steps in the well tempered tuning). Besides that, it sounds
very similar to today's equal spacing. The reason is, that 2^(7/12)
nearly equals 3/2.
</p>
<p>With polyphonic music coming up more and more, a more
sophisticated tuning was invented: the clean tuning. Beginning from
any special note, all other notes are found by repeated application of
clean 7s and clean 4s:
</p>
<blockquote>
<p>
<table>
<p align=center>
<tr><td align=left>9</td><td align=left>&gt;</td><td align=left>4</td><td align=left>&gt;</td><td align=left>B</td><td align=left>&gt;</td><td align=left>6</td></tr>
<tr><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td></tr>
<tr><td align=left>5</td><td align=left>&gt;</td><td align=left>0</td><td align=left>&gt;</td><td align=left>7</td><td align=left>&gt;</td><td align=left>2</td></tr>
<tr><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td></tr>
<tr><td align=left>1</td><td align=left>&gt;</td><td align=left>8</td><td align=left>&gt;</td><td align=left>3</td><td align=left>&gt;</td><td align=left>A</td></tr>
</table>
</p>

<p>&quot;&gt;&quot; means 3/2 used for the 7s. &quot;^&quot; means
5/4 used for the 4s.
</p>
</blockquote>
<p>Thus leading to tunings like in &quot;tables\clean.txt&quot;:
</p>
<blockquote>
<p>
<table border=1 frame=box>
<p align=center>
<tr><td align=left><b>Distance</b></td><td align=left><b>Tuning</b></td><td align=left></td></tr>
<tr><td align=left>0</td><td align=left>1/1</td><td align=left>* f</td></tr>
<tr><td align=left>1</td><td align=left>16/15</td><td align=left>* f</td></tr>
<tr><td align=left>2</td><td align=left>9/8</td><td align=left>* f</td></tr>
<tr><td align=left>3</td><td align=left>6/5</td><td align=left>* f</td></tr>
<tr><td align=left>4</td><td align=left>5/4</td><td align=left>* f</td></tr>
<tr><td align=left>5</td><td align=left>4/3</td><td align=left>* f</td></tr>
<tr><td align=left>6</td><td align=left>45/32</td><td align=left>* f</td></tr>
<tr><td align=left>7</td><td align=left>3/2</td><td align=left>* f</td></tr>
<tr><td align=left>8</td><td align=left>8/5</td><td align=left>* f</td></tr>
<tr><td align=left>9</td><td align=left>5/3</td><td align=left>* f</td></tr>
<tr><td align=left>A</td><td align=left>9/5</td><td align=left>* f</td></tr>
<tr><td align=left>B</td><td align=left>15/8</td><td align=left>* f</td></tr>
</table>
</p>

</blockquote>
<p>This tuning contains many beautiful ratios, but is suitable only
for easy pieces in one key. The MIDI Enhancer enables you to walk far
away from your original harmonic context and stay in a clean tuning by
simply choosing a new fitting harmonizing note per step&nbsp;!
</p>
<p>A variant of the clean tuning is used in the automatic mode. For
certain reasons too deep to explain here, I chose a symmetric subset
of the infinite set of distances built by 5/4, 3/2 and 2/1 (see
&quot;tables\cleansym.txt&quot;):
</p>
<blockquote>
<p>
<table>
<p align=center>
<tr><td align=left></td><td align=left></td><td align=left>9</td><td align=left>&gt;</td><td align=left>4</td><td align=left>&gt;</td><td align=left>B</td><td align=left></td><td align=left></td></tr>
<tr><td align=left></td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left></td></tr>
<tr><td align=left>A</td><td align=left>&gt;</td><td align=left>5</td><td align=left>&gt;</td><td align=left>0</td><td align=left>&gt;</td><td align=left>7</td><td align=left>&gt;</td><td align=left>2</td></tr>
<tr><td align=left></td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left></td></tr>
<tr><td align=left></td><td align=left></td><td align=left>1</td><td align=left>&gt;</td><td align=left>8</td><td align=left>&gt;</td><td align=left>3</td><td align=left></td><td align=left></td></tr>
</table>
</p>

<p>&quot;&gt;&quot; means 3/2 used for the 7s. &quot;^&quot; means
5/4 used for the 4s.
</p>
</blockquote>
<p>In this tuning the interval 6 is tuned chromatically, i.e. at 0
cent.
</p>
<p>Another variant of the clean tuning I derived from J. S. Bach's C
Major Praeludium from &quot;Das wohltemperierte Klavier&quot;. It is
designed in a way that you can survive the first 14 bars of it without
the need to select a new harmonizing note:
</p>
<blockquote>
<p>
<table>
<p align=center>
<tr><td align=left></td><td align=left></td><td align=left>1</td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td></tr>
<tr><td align=left></td><td align=left></td><td align=left>^</td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td></tr>
<tr><td align=left>2</td><td align=left>&gt;</td><td align=left>9</td><td align=left>&gt;</td><td align=left>4</td><td align=left>&gt;</td><td align=left>B</td><td align=left>&gt;</td><td align=left>6</td><td align=left></td><td align=left></td></tr>
<tr><td align=left></td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left></td></tr>
<tr><td align=left></td><td align=left></td><td align=left>5</td><td align=left>&gt;</td><td align=left>0</td><td align=left>&gt;</td><td align=left>7</td><td align=left>&gt;</td><td align=left>2</td><td align=left>&gt;</td><td align=left>9</td></tr>
<tr><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left>^</td><td align=left></td><td align=left></td></tr>
<tr><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left></td><td align=left>A</td><td align=left></td><td align=left></td></tr>
</table>
</p>

<p>&quot;&gt;&quot; means 3/2 used for the 7s. &quot;^&quot; means
5/4 used for the 4s.
</p>
</blockquote>
<p>This remarkable tuning offers you two 2s and two 9s. Since the
harmonizing note will be &quot;C&quot; in the first bars of the
Preaeludium, you will have a &quot;D&quot; 3/2 above the
&quot;G&quot;, and another, deeper &quot;D&quot; 6/5 below the
&quot;F&quot;. For each of these two &quot;D&quot;, you get a fitting
&quot;A&quot; with ratio 3/2. Note also the tuning of the 1: a
&quot;diminuished 7 chord&quot; C#,E,G,A# of perfect 6/5 can be
played. This tuning also is symmetric around a center that can be
found in the 0,4,B,7 square. What do you think ? Is this only a
mathematic accident that happened to Bach ?
</p>
<p>You can experience this tuning (&quot;tables\double29.txt&quot;)
with the MIDI Enhancer <b>only in pitch bend mode</b>, since it needs
cent values above 63 and below -64.
</p>
<p>A rather exotic tuning I invented uses the ratio 7/6 for building
3s (instead of 6/5 like in the clean tunings described above). You
then get 8/7 for the 2s and 9/7 for the 4s (see
&quot;tables\sevens.txt&quot;):
</p>
<blockquote>
<p>
<table>
<p align=center>
<tr><td align=left>B</td><td align=left>&gt;</td><td align=left>6</td><td align=left>&gt;</td><td align=left>1</td></tr>
<tr><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td></tr>
<tr><td align=left>8</td><td align=left>&gt;</td><td align=left>3</td><td align=left>&gt;</td><td align=left>A</td></tr>
<tr><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td></tr>
<tr><td align=left>5</td><td align=left>&gt;</td><td align=left>0</td><td align=left>&gt;</td><td align=left>7</td></tr>
<tr><td align=left>^</td><td align=left></td><td align=left>^</td><td align=left></td><td align=left>^</td></tr>
<tr><td align=left>2</td><td align=left>&gt;</td><td align=left>9</td><td align=left>&gt;</td><td align=left>4</td></tr>
</table>
</p>

<p>&quot;&gt;&quot; means 3/2 used for the 7s. &quot;^&quot; means
7/6 used for the 3s.
</p>
</blockquote>
<p>In the Arabian music the ratio 12/11 seems to be of special
interest. It can be found 49 cent below an equally tempered interval
2. In the example &quot;tables\arabian.txt&quot; you'll find such a
tuning built upon the ratios 3/2 and 12/11, where 3/2 is approximated
like in today's equal spacing, and 12/11 is approximated by 50 cent
(instead of 49 cent) derivations, thus introducing what is elsewhere
called &quot;quarter tones&quot; into the scale. Originally I took the
scale from my Roland JV-1010 user's manual, but I modified it until it
sounded more &quot;Arabian&quot; to my European ears.
</p>
<p>The meantone scale (&quot;tables\meantone.txt&quot;) is, like the
equal temperament, a compromise between good sounding intervals and
the wish to play in several keys. It is positioned closer to the pole
&quot;good sounding intervals&quot; than the equal temperament. If you
want to play a piece in F# major for example, you normally will not
need to change the harmonizing note during the piece but you can leave
it on F# - except during chromatic sections where you might switch
back to equal temperament by releasing the harmonizing note
(&quot;hold&quot; must be off then). The meantone scale will give good
3s, 4s and 7s in dominant and subdominant directions without the need
to reharmonize. Like the &quot;quint circle&quot; of the equal
temperament, the meantone scale closes (after 31 steps&nbsp;!). If you had
31/12 more keys on your keyboard than you have now, you could make
pretty meantone music in all 31 keys. As long as you must restrict
yourself to 88 different notes on your instrument or even less, the
MIDI Enhancer will help you making meantone music&nbsp;!
</p>
<hr>
<a href="02.HTM"><img src="udo_up.gif" alt="Using the MIDI Enhancer"></a>
<a href="02.HTM"><img src="udo_lf.gif" alt="Using the MIDI Enhancer"></a>
<a href="0202.HTM"><img src="udo_rg.gif" alt="General"></a>
</body>
</html>
